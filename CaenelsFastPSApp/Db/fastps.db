
record (stringin, "$(P)$(R)Model")
{
    field(DESC, "Model")
    field(DTYP, "stream")
    field(INP,  "@fastps.proto getModel L0")
    field(PINI, "YES")
}

record (ai, "$(P)$(R)LimitMaxIV")
{
    field(DESC, "Model")
    field(DTYP, "stream")
    field(INP,  "@fastps.proto getLimitCurrentVoltage L0")
    field(PINI, "YES")
}

record (stringin, "$(P)$(R)Version")
{
    field(DESC, "Model")
    field(DTYP, "stream")
    field(INP,  "@fastps.proto getVersion L0")
    field(PINI, "YES")
}

################################################################################
record(bo, "$(P)$(R)Enable")
{
    field(DESC, "Turn supply off/on")
    field(DTYP, "stream")
    field(OUT,  "@fastps.proto setEnable L0")
    field(ZNAM, "Off")
    field(ONAM, "On")
}

record(bo, "$(P)$(R)RegulationMode")
{
    field(DESC, "Selects between voltage/current reg")
    field(DTYP, "stream")
    field(OUT,  "@fastps.proto setRegulationMode L0")
    field(ZNAM, "V")
    field(ONAM, "I")
}

record(ao, "$(P)$(R)Voltage")
{
    field(DESC, "Voltage control (in V reg mode)")
    field(DTYP, "stream")
    field(OUT,  "@fastps.proto setVoltage L0")
    field(PREC, "5")
}

record(ao, "$(P)$(R)Current")
{
    field(DESC, "Current control (in V reg mode)")
    field(DTYP, "stream")
    field(OUT,  "@fastps.proto setCurrent L0")
    field(PREC, "5")
}

record(bo, "$(P)$(R)StatusReset")
{
    field(DESC, "Reset status register/clear faults")
    field(DTYP, "stream")
    field(OUT,  "@fastps.proto resetStatus L0")
}

################################################################################
record(bi, "$(P)$(R)ReadbackPoll_")
{
    field(DESC, "Head of readback chain")
    field(FLNK, "$(P)$(R)OutputVoltage")
    field(PINI, "YES")
    field(INP,  "0")
    field(SCAN, "1 second")
}

record(ai, "$(P)$(R)OutputVoltage")
{
    field(DESC, "Output voltage")
    field(DTYP, "stream")
    field(EGU,  "V")
    field(FLNK, "$(P)$(R)OutputCurrent")
    field(INP,  "@fastps.proto getOutputVoltage L0")
    field(PREC, "5")
}

record(ai, "$(P)$(R)OutputCurrent")
{
    field(DESC, "Output current")
    field(DTYP, "stream")
    field(EGU,  "A")
    field(FLNK, "$(P)$(R)GroundCurrent")
    field(INP,  "@fastps.proto getOutputCurrent L0")
    field(PREC, "5")
}

record(ai, "$(P)$(R)GroundCurrent")
{
    field(DESC, "Ground current")
    field(DTYP, "stream")
    field(EGU,  "A")
    field(FLNK, "$(P)$(R)DCLinkVoltage")
    field(INP,  "@fastps.proto getGroundCurrent L0")
    field(PREC, "3")
}

record(ai, "$(P)$(R)DCLinkVoltage")
{
    field(DESC, "DC Link voltage")
    field(DTYP, "stream")
    field(EGU,  "V")
    field(FLNK, "$(P)$(R)HeatsinkTemp")
    field(INP,  "@fastps.proto getDCLinkVoltage L0")
    field(PREC, "2")
}

record(ai, "$(P)$(R)HeatsinkTemp")
{
    field(DESC, "Heatsink temperature")
    field(DTYP, "stream")
    field(EGU,  "deg C")
    field(FLNK, "$(P)$(R)StatusMSB")
    field(INP,  "@fastps.proto getTemperature L0")
    field(PREC, "2")
}

record(mbbiDirect, "$(P)$(R)StatusMSB")
{
    field(DESC, "Status MSB")
    field(DTYP, "stream")
    field(FLNK, "$(P)$(R)StatusLSB")
    field(INP,  "@fastps.proto getStatusMSB L0")
}

record(mbbiDirect, "$(P)$(R)StatusLSB")
{
    field(DESC, "Status LSB")
    field(DTYP, "stream")
    field(INP,  "@fastps.proto getStatusLSB L0")
}
